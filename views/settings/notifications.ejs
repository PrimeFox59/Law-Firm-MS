<%- include('../partials/header') %>

<div class="container-fluid p-4 page-content">
  <div class="d-flex align-items-center mb-3 gap-2">
    <i class="fas fa-bell text-primary"></i>
    <h4 class="mb-0">Notification Settings</h4>
  </div>

  <div class="row g-3">
    <div class="col-lg-4">
      <div class="list-group shadow-sm">
        <a href="/settings/profile" class="list-group-item list-group-item-action">Profile Settings</a>
        <a href="/settings/security" class="list-group-item list-group-item-action">Security</a>
        <a class="list-group-item list-group-item-action active">Notifications</a>
        <a href="/settings/notifications/email" class="list-group-item list-group-item-action">Email Notifications</a>
        <a href="/settings/google" class="list-group-item list-group-item-action">Google Account</a>
        <a href="/settings/activity" class="list-group-item list-group-item-action">Activity Log</a>
        <a href="/settings/hierarchy" class="list-group-item list-group-item-action">Hierarchy</a>
      </div>
    </div>

    <div class="col-lg-8">
      <div class="card shadow-sm">
        <div class="card-body">
          <form method="POST" action="/settings/notifications">
            <div class="mb-3">
              <p class="text-muted mb-0">Toggle which events send you in-app/browser notifications.</p>
            </div>

            <div class="list-group">
              <label class="list-group-item d-flex justify-content-between align-items-center">
                <div>
                  <div class="fw-semibold">Task assigned</div>
                  <div class="text-muted small">When a task is assigned to you</div>
                </div>
                <div class="form-check form-switch mb-0">
                  <input class="form-check-input" type="checkbox" name="notify_task_assigned" <%= user.notify_task_assigned ? 'checked' : '' %>>
                </div>
              </label>

              <label class="list-group-item d-flex justify-content-between align-items-center">
                <div>
                  <div class="fw-semibold">Task completed</div>
                  <div class="text-muted small">When your task is marked complete</div>
                </div>
                <div class="form-check form-switch mb-0">
                  <input class="form-check-input" type="checkbox" name="notify_task_completed" <%= user.notify_task_completed ? 'checked' : '' %>>
                </div>
              </label>

              <label class="list-group-item d-flex justify-content-between align-items-center">
                <div>
                  <div class="fw-semibold">Task deadline</div>
                  <div class="text-muted small">Upcoming due date reminders</div>
                </div>
                <div class="form-check form-switch mb-0">
                  <input class="form-check-input" type="checkbox" name="notify_task_deadline" <%= user.notify_task_deadline ? 'checked' : '' %>>
                </div>
              </label>

              <label class="list-group-item d-flex justify-content-between align-items-center">
                <div>
                  <div class="fw-semibold">Approval requested</div>
                  <div class="text-muted small">When someone requests your approval</div>
                </div>
                <div class="form-check form-switch mb-0">
                  <input class="form-check-input" type="checkbox" name="notify_approval_request" <%= user.notify_approval_request ? 'checked' : '' %>>
                </div>
              </label>

              <label class="list-group-item d-flex justify-content-between align-items-center">
                <div>
                  <div class="fw-semibold">Approval result</div>
                  <div class="text-muted small">When an approval is approved/rejected</div>
                </div>
                <div class="form-check form-switch mb-0">
                  <input class="form-check-input" type="checkbox" name="notify_approval_result" <%= user.notify_approval_result ? 'checked' : '' %>>
                </div>
              </label>

              <label class="list-group-item d-flex justify-content-between align-items-center">
                <div>
                  <div class="fw-semibold">Invoices</div>
                  <div class="text-muted small">Invoice created/updated</div>
                </div>
                <div class="form-check form-switch mb-0">
                  <input class="form-check-input" type="checkbox" name="notify_invoice" <%= user.notify_invoice ? 'checked' : '' %>>
                </div>
              </label>

              <label class="list-group-item d-flex justify-content-between align-items-center">
                <div>
                  <div class="fw-semibold">Payments</div>
                  <div class="text-muted small">Payment received or status changes</div>
                </div>
                <div class="form-check form-switch mb-0">
                  <input class="form-check-input" type="checkbox" name="notify_payment" <%= user.notify_payment ? 'checked' : '' %>>
                </div>
              </label>

              <label class="list-group-item d-flex justify-content-between align-items-center">
                <div>
                  <div class="fw-semibold">Matter updates</div>
                  <div class="text-muted small">General matter activity</div>
                </div>
                <div class="form-check form-switch mb-0">
                  <input class="form-check-input" type="checkbox" name="notify_matter" <%= user.notify_matter ? 'checked' : '' %>>
                </div>
              </label>
            </div>

            <div class="d-flex justify-content-end mt-3 gap-2">
              <button type="submit" class="btn btn-primary">Save Preferences</button>
            </div>
          </form>
          <form method="POST" action="/settings/notifications/test" class="d-inline">
            <div class="d-flex justify-content-end mt-2">
              <button type="submit" class="btn btn-outline-secondary">Send Test Email</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>

<%- include('../partials/footer') %>
